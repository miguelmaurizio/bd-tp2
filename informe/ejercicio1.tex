\section{Ejercicio 1}
\begin{itemize}
\item Los documentos correspondientes a las facturas enviadas tendr\'an el siguiente dise\~no:
\begin{verbatim}
{"id","usuario","suscripcionRubi","monto","fecha"}
\end{verbatim}
Los datos para llenarlos se pueden obtener ejecutando la siguiente consulta en la base de SQL:
\begin{verbatim}
SELECT f.idFactura AS id, f.idUsuario AS usuario, true AS suscripcionRubi, f.monto, 
f.periodo AS fecha
FROM factura f 
INNER JOIN suscripcionRubiOriente sr ON f.idUsuario = sr.idUsuario
WHERE f.periodo = sr.periodo 
AND f.periodo < SELECT date('now','-1 month')
UNION 
SELECT f.idFactura AS id, f.idUsuario AS usuario, false AS suscripcionRubi, f.monto, 
f.periodo AS fecha
FROM factura f
WHERE f.idUsuario NOT IN 
(SELECT idUsuario FROM suscripcionRubiOriente WHERE periodo = f.periodo)
AND f.periodo < SELECT date('now','-1 month')
\end{verbatim}

\item Los documentos correspondientes a las ventas realizadas tendr\'an el siguiente dise\~no:
\begin{verbatim}
{"id","fecha","idComprador","idVendedor","calificacionComprador",
  "calificacionVendedor","comision","tipoPublicacion"}
\end{verbatim}
Los datos para llenarlos se pueden obtener ejecutando la siguiente consulta en la base de SQL:
\begin{verbatim}
SELECT c.idCompra AS id, c.fecha AS fecha, c.idUsuario AS idComprador,
p.idUsuario AS idVendedor, cal.valoracionComprador AS calificacionComprador, 
cal.valoracionVendedor AS calificacionVendedor, (tp.comision * p.precio) AS comision, 
"servicio" AS tipoDePublicacion
FROM compra c, calificacion cal, publicacion p, publicacionFinalizada pf, 
tipoPublicacion tp, item it
WHERE c.idPublicacion = pf.idPublicacion AND pf.idPublicacion = p.idPublicacion 
AND p.nombreTipoPublicacion = tp.nombre 
AND it.idPublicacion = c.idPublicacion AND it.tipo = 1
AND c.idCalificacion = cal.idCalificacion
AND c.fecha < SELECT date('now','-1 month')
UNION
SELECT c.idCompra AS id, c.fecha AS fecha, c.idUsuario AS idComprador, 
p.idUsuario AS idVendedor, cal.valoracionComprador AS calificacionComprador, 
cal.valoracionVendedor AS calificacionVendedor, 
(tp.comision * p.precio) AS comision, "producto" AS tipoDePublicacion
FROM compra c, calificacion cal, publicacion p, publicacionFinalizada pf, 
tipoPublicacion tp, item it
WHERE c.idPublicacion = pf.idPublicacion AND pf.idPublicacion = p.idPublicacion 
AND p.nombreTipoPublicacion = tp.nombre 
AND it.idPublicacion = c.idPublicacion AND it.tipo = 0
AND c.idCalificacion = cal.idCalificacion
AND c.fecha < SELECT date('now','-1 month')
UNION
SELECT c.idCompra AS id, c.fecha AS fecha, c.idUsuario AS idComprador, 
p.idUsuario AS idVendedor, cal.valoracionComprador AS calificacionComprador, 
cal.valoracionVendedor AS calificacionVendedor, 
(tp.comision * p.precio) AS comision, "mixto" AS tipoDePublicacion
FROM compra c, calificacion cal, publicacion p, publicacionFinalizada pf, 
tipoPublicacion tp, item it
WHERE c.idPublicacion = pf.idPublicacion AND pf.idPublicacion = p.idPublicacion 
AND p.nombreTipoPublicacion = tp.nombre 
AND it.idPublicacion = c.idPublicacion AND it.tipo <> 0 AND it.tipo <> 1
AND c.idCalificacion = cal.idCalificacion
AND c.fecha < SELECT date('now','-1 month')
\end{verbatim}

\end{itemize}